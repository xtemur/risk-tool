<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Risk Signal</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            line-height: 1.4;
            color: #2c3e50;
            max-width: 900px;
            margin: 0 auto;
            padding: 0;
            background-color: #ffffff;
        }

        .container {
            background-color: #ffffff;
            border: 1px solid #bdc3c7;
        }

        .header {
            background-color: #2c3e50;
            color: #ffffff;
            padding: 15px 20px;
            border-bottom: 2px solid #34495e;
        }

        .header h1 {
            margin: 0;
            font-size: 16px;
            font-weight: normal;
            letter-spacing: 1px;
        }

        .header .date {
            font-size: 12px;
            margin-top: 5px;
            opacity: 0.8;
        }

        .content {
            padding: 20px;
        }

        .section {
            margin-bottom: 25px;
            border-bottom: 1px solid #ecf0f1;
            padding-bottom: 15px;
        }

        .section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .section h2 {
            margin: 0 0 10px 0;
            font-size: 14px;
            font-weight: bold;
            color: #2c3e50;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid #34495e;
            padding-bottom: 3px;
        }

        .metrics-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
            margin-top: 10px;
        }

        .metrics-table th,
        .metrics-table td {
            padding: 6px 12px;
            text-align: left;
            border: 1px solid #bdc3c7;
        }

        .metrics-table th {
            background-color: #ecf0f1;
            font-weight: bold;
            font-size: 11px;
            text-transform: uppercase;
        }

        .metrics-table td.number {
            text-align: right;
            font-family: 'Consolas', 'Monaco', monospace;
        }

        .positive { color: #27ae60; }
        .negative { color: #e74c3c; }
        .neutral { color: #7f8c8d; }

        .predictions-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
            margin-top: 10px;
        }

        .predictions-table th,
        .predictions-table td {
            padding: 8px 10px;
            text-align: left;
            border: 1px solid #bdc3c7;
        }

        .predictions-table th {
            background-color: #34495e;
            color: #ffffff;
            font-weight: bold;
            font-size: 11px;
            text-transform: uppercase;
        }

        .predictions-table td.number {
            text-align: right;
            font-family: 'Consolas', 'Monaco', monospace;
        }

        .predictions-table td.signal {
            text-align: center;
            font-weight: bold;
        }

        .signal-buy { background-color: #d5f4e6; color: #27ae60; }
        .signal-sell { background-color: #fadbd8; color: #e74c3c; }
        .signal-hold { background-color: #fef9e7; color: #f39c12; }
        .signal-neutral { background-color: #eaecee; color: #7f8c8d; }

        .summary-stats {
            background-color: #f8f9fa;
            border: 1px solid #bdc3c7;
            padding: 10px;
            font-size: 11px;
            font-family: 'Consolas', 'Monaco', monospace;
        }

        .model-metrics {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 10px;
        }

        .metric-box {
            text-align: center;
            padding: 8px;
            border: 1px solid #bdc3c7;
            background-color: #f8f9fa;
        }

        .metric-box .label {
            font-size: 10px;
            color: #7f8c8d;
            text-transform: uppercase;
            margin-bottom: 3px;
        }

        .metric-box .value {
            font-size: 14px;
            font-weight: bold;
            font-family: 'Consolas', 'Monaco', monospace;
        }

        .footer {
            background-color: #ecf0f1;
            padding: 10px 20px;
            font-size: 10px;
            color: #7f8c8d;
            border-top: 1px solid #bdc3c7;
        }

        .disclaimer {
            background-color: #f4f4f4;
            border: 1px solid #bdc3c7;
            padding: 10px;
            margin-top: 15px;
            font-size: 10px;
            color: #7f8c8d;
        }

        @media (max-width: 600px) {
            .model-metrics {
                grid-template-columns: repeat(2, 1fr);
            }

            .predictions-table {
                font-size: 10px;
            }

            .predictions-table th,
            .predictions-table td {
                padding: 5px 6px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>DAILY RISK SIGNAL REPORT</h1>
            <div class="date">{{ report_date }} | Generated: {{ generation_timestamp }}</div>
        </div>

        <div class="content">
            <!-- Portfolio Summary -->
            <div class="section">
                <h2>Portfolio Overview</h2>
                <div class="model-metrics">
                    <div class="metric-box">
                        <div class="label">Active Traders</div>
                        <div class="value neutral">{{ total_traders }}</div>
                    </div>
                    <div class="metric-box">
                        <div class="label">Total Expected PnL</div>
                        <div class="value {{ expected_pnl_class }}">{{ expected_pnl }}</div>
                    </div>
                    <div class="metric-box">
                        <div class="label">Avg Confidence</div>
                        <div class="value neutral">{{ avg_confidence }}%</div>
                    </div>
                    <div class="metric-box">
                        <div class="label">Active Signals</div>
                        <div class="value neutral">{{ active_signals }}</div>
                    </div>
                </div>
            </div>

            <!-- Model Performance -->
            {% if model_performance %}
            <div class="section">
                <h2>Model Performance Metrics</h2>
                <table class="metrics-table">
                    <tr>
                        <th>Metric</th>
                        <th>Value</th>
                        <th>Status</th>
                    </tr>
                    <tr>
                        <td>Hit Rate</td>
                        <td class="number">{{ hit_rate }}%</td>
                        <td class="{{ hit_rate_class }}">{{ hit_rate_status }}</td>
                    </tr>
                    <tr>
                        <td>Sharpe Ratio</td>
                        <td class="number">{{ sharpe_ratio }}</td>
                        <td class="{{ sharpe_class }}">{{ sharpe_status }}</td>
                    </tr>
                    <tr>
                        <td>RÂ² Score</td>
                        <td class="number">{{ r2_score }}</td>
                        <td class="{{ r2_class }}">{{ r2_status }}</td>
                    </tr>
                    <tr>
                        <td>Model Version</td>
                        <td class="number">{{ model_version }}</td>
                        <td class="neutral">ACTIVE</td>
                    </tr>
                </table>
            </div>
            {% endif %}

            <!-- Trading Signals -->
            <div class="section">
                <h2>Trading Signals</h2>
                <table class="predictions-table">
                    <thead>
                        <tr>
                            <th>Trader ID</th>
                            <th>Predicted PnL</th>
                            <th>Confidence</th>
                            <th>Signal</th>
                            <th>7D Performance</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for trader in traders %}
                        <tr>
                            <td>{{ trader.id }}</td>
                            <td class="number {{ trader.pnl_class }}">{{ trader.predicted_pnl }}</td>
                            <td class="number">{{ trader.confidence }}%</td>
                            <td class="signal {{ trader.signal_class }}">{{ trader.signal_code }}</td>
                            <td class="number {{ trader.recent_performance_class }}">{{ trader.recent_performance }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <!-- Signal Legend -->
            <div class="section">
                <h2>Signal Legend</h2>
                <table class="metrics-table">
                    <tr>
                        <th>Code</th>
                        <th>Description</th>
                        <th>Criteria</th>
                    </tr>
                    <tr>
                        <td class="signal signal-buy">BUY</td>
                        <td>Strong positive signal</td>
                        <td>PnL > $100, Confidence > 70%</td>
                    </tr>
                    <tr>
                        <td class="signal signal-hold">MOD</td>
                        <td>Moderate positive signal</td>
                        <td>PnL > $0, Confidence > 50%</td>
                    </tr>
                    <tr>
                        <td class="signal signal-neutral">NEU</td>
                        <td>Neutral position</td>
                        <td>-$50 < PnL < $50</td>
                    </tr>
                    <tr>
                        <td class="signal signal-sell">RED</td>
                        <td>Consider reducing exposure</td>
                        <td>PnL < -$50, Confidence > 50%</td>
                    </tr>
                </table>
            </div>

            <!-- Risk Summary -->
            {% if alerts %}
            <div class="section">
                <h2>Risk Alerts</h2>
                <div class="summary-stats">
                    {% for alert in alerts %}
                    [{{ alert.type|upper }}] {{ alert.message }}<br>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <div class="disclaimer">
                <strong>DISCLAIMER:</strong> These signals are generated by algorithmic models and are for informational purposes only.
                Trading involves substantial risk of loss. Past performance is not indicative of future results.
                Always conduct independent analysis before making trading decisions.
            </div>
        </div>

        <div class="footer">
            Risk Management System v{{ model_version }} |
            Data as of {{ report_date }} |
            Next update: {{ next_update_time }}
        </div>
    </div>
</body>
</html>
